'use client'
import { useRef, useEffect } from 'react';

function toggleDarkMode(dark_mode: boolean): void {
    document.querySelector("body")?.setAttribute('data-theme', dark_mode ? "dark" : "light");
}

const styles = {
    "container": 'h-auto w-(--size-l) cursor-pointer',
    "bottom": "light:fill-neutral-3 dark:fill-neutral-4 transition-colors duration-300 ease-custom",
    "bulb": "light:fill-neutral-2 dark:fill-neutral-1 transition-colors duration-300 ease-custom",
    "shine": "fill-neutral-1"
}

const ThemeToggle = () => {
    const dark_mode = useRef(false);

    useEffect(() => {
        if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            toggleDarkMode(true);
            dark_mode.current = true;
        }
    });

    const clicked = (): void => {
        dark_mode.current = !dark_mode.current;
        toggleDarkMode(dark_mode.current);
    }

    return (
        <svg className={ styles.container } onClick={clicked} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 343.41428 383.22467">
            <path className={ styles.bottom } d="M266.47878,723.66268c-5.20823-2.23022-10.79211-3.86148-15.53386-6.83544-6.59348-4.13535-10.68823-10.53518-12.78283-18.39864h65.64349c-2.27638,8.3983-6.84317,15.024-14.05594,19.41139-4.15611,2.52807-9.00359,3.91956-13.53986,5.82269Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.bottom } d="M325.30823,652.45763c0,8.17146.39815,16.14067-.13564,24.047-.37516,5.55676-4.975,8.75214-11.18062,8.82218-7.85584.08868-15.71343.02408-23.57025.02426q-30.492.00061-60.98395-.0039c-9.12725-.00567-13.01173-3.8751-13.0284-12.935-.01209-6.577-.00236-13.15406-.00236-19.9545Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.bulb } d="M325.56751,639.00268H216.7012c-.29176-3.92094-.48884-7.85492-.89187-11.76768-1.93319-18.76778-9.76573-34.84245-22.34478-48.74582a106.24223,106.24223,0,0,1-26.12334-53.69048c-9.18018-51.11855,23.73613-103.68546,74.0326-117.87239,59.85545-16.88321,119.71435,18.87811,132.35641,79.76036,6.72474,32.3853-.39519,62.32985-21.90515,87.51381C335.71793,593.05876,324.97161,613.3104,325.56751,639.00268Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M176.81906,610.17341c-1.32207,2.13386-2.03416,3.8946-3.25968,5.15689q-8.58945,8.84711-17.42786,17.45173c-3.057,2.994-6.355,3.1335-8.9313.62078-2.58908-2.52518-2.53184-5.914.40836-8.91779,5.9249-6.053,11.94918-12.00884,17.94361-17.99358,2.0667-2.06339,4.68883-2.861,7.12346-1.33795C174.35252,606.20249,175.35573,608.32831,176.81906,610.17341Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M118.12353,503.5771c3.97837-.00186,7.95856-.077,11.93458.01945,3.90608.09477,6.2979,2.38446,6.34376,5.84372.04608,3.475-2.30818,5.993-6.15727,6.04919q-12.49162.18248-24.98743-.01509a5.78077,5.78077,0,0,1-5.99484-5.84793c-.04954-3.44533,2.37164-5.91636,6.18095-6.021C109.66709,503.48953,113.89654,503.579,118.12353,503.5771Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M179.447,412.254c-1.12585,1.42115-2.07376,3.71084-3.67962,4.35159-1.76978.70617-4.90814.7306-6.12745-.38886-6.68409-6.13671-13.07664-12.6073-19.31675-19.20221-2.14168-2.26344-1.68782-5.18143.48085-7.43465,2.29259-2.382,5.313-2.90875,7.70485-.65438,6.607,6.22734,12.95,12.738,19.29222,19.23923C178.58269,408.96586,178.726,410.38969,179.447,412.254Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M276.943,359.32889c-.001,3.98316.07431,7.96815-.02262,11.949-.09327,3.83-2.4913,6.402-5.82127,6.48354-3.46689.08492-6.04248-2.57571-6.0808-6.59111q-.11579-12.13509.00474-24.27192c.04009-3.85924,2.43973-6.37922,5.81059-6.45846,3.49959-.08226,6.00457,2.53315,6.09092,6.56651C277.01243,351.11215,276.944,355.22126,276.943,359.32889Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M393.61532,393.17732c-1.26092,2.14993-1.91511,3.96365-3.13711,5.22907-5.53269,5.72925-11.18019,11.35031-16.88,16.91445-2.93855,2.86866-6.47408,2.92685-8.93339.40571-2.35106-2.41018-2.32264-5.917.36463-8.66651,5.74139-5.87448,11.58022-11.65458,17.42989-17.4219,1.91952-1.89249,4.37623-2.887,6.76-1.31262C390.91763,389.44714,392.06212,391.40726,393.61532,393.17732Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M424.05214,503.574c4.10343.00224,8.20888-.07708,12.30975.0253,3.84015.09586,6.29044,2.48055,6.31381,5.89777.02339,3.42083-2.40031,5.94055-6.24093,5.99591q-12.30774.17739-24.61961.00376c-3.89376-.05253-6.268-2.46863-6.28854-5.92759-.02152-3.623,2.41461-5.89956,6.58852-5.98072C416.09273,503.511,420.073,503.57172,424.05214,503.574Z" transform="translate(-99.26159 -340.438)"/>
            <path className={ styles.shine } d="M371.55214,603.67044c2.13167,1.3128,3.89261,2.01725,5.153,3.23835,5.90541,5.72135,11.7064,11.55211,17.47627,17.41114,3.01556,3.06218,3.20073,6.28534.71788,8.92644-2.46882,2.62617-5.927,2.62235-8.92256-.30169-6.06257-5.91783-12.00966-11.954-17.99749-17.94826-2.053-2.05522-2.9456-4.64371-1.42119-7.108C367.60075,606.20283,369.703,605.17277,371.55214,603.67044Z" transform="translate(-99.26159 -340.438)"/>
        </svg>
    )
}

export default ThemeToggle